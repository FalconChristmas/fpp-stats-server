<!DOCTYPE HTML>

<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.css"
        integrity="sha512-/zs32ZEJh+/EO2N1b0PEdoA10JkdC3zJ8L5FTiQu82LR9S/rOQNfQN7U59U9BC12swNeRAz3HSzIL2vpp4fv3w=="
        crossorigin="anonymous" />
    <link rel="stylesheet" href="my.css" />

    <meta name="keywords" content="Christmas Lights, Falcon Pi Player, FPP">
    <title>FPP Installations Statistics</title>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TPLF0LZ42K"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-TPLF0LZ42K');
    </script>
</head>

<body>
    <div id="main-div" class="container" style="padding-top: 2em">
        <h1>FPP Installations Statistics</h1>
        <div id="loading" class="ajax-loading-60px"></div>
        <div id="all-charts">
            <!-- Start Menu-->
            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                    <a class="nav-link active" id="pills-general-tab" data-toggle="pill" href="#pills-general"
                        role="tab" aria-controls="pills-general" aria-selected="true">General</a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link" id="pills-output-tab" data-toggle="pill" href="#pills-output" role="tab"
                        aria-controls="pills-output" aria-selected="false">Outputs</a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link" id="pills-contact-tab" data-toggle="pill" href="#pills-contact" role="tab"
                        aria-controls="pills-contact" aria-selected="false">Contact</a>
                </li>
            </ul>

            <!-- Start Tabs-->
            <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade show active" id="pills-general" role="tabpanel"
                    aria-labelledby="pills-general-tab">
                    <!-- General Tab-->
                    <div class="intro-div">This is a top level summary of information gathered from FPP installations
                        around the world.
                        Unless otherwise stated only those installations that have submitted statistics in the last year
                        are included. This report was last updated
                        <span class="lastUpdated"><i>Refresh has failed</i></span>.
                    </div>
                    <div class="row">
                        <div class="chart-outer col-sm-6">
                            <h2># of Devices Reporting</h2>
                            <div class="canvas-holder">
                                <canvas id="lastReportChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-outer col-sm-6">
                            <h2>Release</h2>
                            <div class="canvas-holder">
                                <canvas id="version365"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="chart-outer col-sm-6">
                            <h2>Platform</h2>
                            <div class="canvas-holder">
                                <canvas id="platform365"></canvas>
                            </div>
                        </div>
                        <div class="chart-outer col-sm-6">
                            <h2>Generic Platform Variant</h2>
                            <div class="canvas-holder">
                                <canvas id="platformGenericVar365"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="chart-outer col-sm-6">
                            <h2>Pi Platform Variant</h2>
                            <div class="canvas-holder">
                                <canvas id="platformPiVar365"></canvas>
                            </div>
                        </div>
                        <div class="chart-outer col-sm-6">
                            <h2>BBB Platform Variant</h2>
                            <div class="canvas-holder">
                                <canvas id="platformBBBVar365"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="chart-outer col-sm-6">
                            <h2>FPP Mode</h2>
                            <div class="canvas-holder">
                                <canvas id="fppMode365"></canvas>
                            </div>
                        </div>
                        <div class="chart-outer col-sm-6">
                            <h2>UI Level</h2>
                            <div class="canvas-holder">
                                <canvas id="uiLevel365"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="chart-outer col-sm-6">
                            <h2>MQTT Configured?</h2>
                            <div class="canvas-holder">
                                <canvas id="mqtt365"></canvas>
                            </div>
                        </div>
                        <div class="chart-outer col-sm-6">
                            <h2>Installed Cape</h2>
                            <div class="canvas-holder">
                                <canvas id="cape365"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-2"></div>
                        <div class="chart-outer col-sm-8">
                            <h2>Top 15 Capes</h2>
                            <div class="canvas-holder">
                                <canvas id="topCapes365"></canvas>
                            </div>
                        </div>
                        <div class="col-sm-2"></div>
                    </div>

                    <div class="row">
                        <div class="col-sm-2"></div>
                        <div class="chart-outer col-sm-8">
                            <h2>Top 15 Timezones</h2>
                            <div class="canvas-holder">
                                <canvas id="topTimezone365"></canvas>
                            </div>
                        </div>
                        <div class="col-sm-2"></div>
                    </div>

                    <div class="row">
                        <div class="col-sm-2"></div>
                        <div class="chart-outer col-sm-8">
                            <h2>Top 10 Plugins</h2>
                            <div class="canvas-holder">
                                <canvas id="plugins365"></canvas>
                            </div>
                        </div>
                        <div class="col-sm-2"></div>
                    </div>


                    <div class="row">
                        <div class="chart-outer col-sm-6">
                            <h2>Output Processors</h2>
                            <div class="canvas-holder">
                                <canvas id="outputProcessor365"></canvas>
                            </div>
                        </div>
                        <div class="chart-outer col-sm-6">
                            <h2>Popular Settings</h2>
                            <div class="canvas-holder">
                                <canvas id="popularSettings365"></canvas>
                            </div>
                        </div>
                    </div>


                </div> <!-- End General tab-->
                <!-- Next Tab-->
                <div class="tab-pane fade" id="pills-output" role="tabpanel" aria-labelledby="pills-output-tab">
                    <div class="intro-div">This tab summarizes the types of outputs configured for each FPP device
                        and was updated
                        <span class="lastUpdated"><i>Refresh has failed</i></span>.
                    </div>
                    <div class="row">
                        <div class="chart-outer col-sm-6">
                            <h2>E1.31 Output Universes</h2>
                            <div class="canvas-holder">
                                <canvas id="outUnivt365"></canvas>
                            </div>
                        </div>
                        <div class="chart-outer col-sm-6">
                            <h2>E1.31 Output Channels</h2>
                            <div class="canvas-holder">
                                <canvas id="outChannel365"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="chart-outer col-sm-6">
                            <h2>Local Pixel Outputs</h2>
                            <div class="canvas-holder">
                                <canvas id="localPixels365"></canvas>
                            </div>
                        </div>
                        <div class="chart-outer col-sm-6">
                            <h2>Usage of Other Outputs</h2>
                            <div class="canvas-holder">
                                <canvas id="otherOutputs365"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="chart-outer col-sm-6">
                            <h2>Panel Channel Counts</h2>
                            <div class="canvas-holder">
                                <canvas id="panelChannel365"></canvas>
                            </div>
                        </div>
                        <div class="chart-outer col-sm-6">
                            <h2># of Configured Panels</h2>
                            <div class="canvas-holder">
                                <canvas id="PanelCounts365"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="chart-outer col-sm-6">
                            <h2>Panel Sizes</h2>
                            <div class="canvas-holder">
                                <canvas id="panelSize365"></canvas>
                            </div>
                        </div>
                        <div class="chart-outer col-sm-6">
                            <h2>Types of Panels</h2>
                            <div class="canvas-holder">
                                <canvas id="PanelSubType365"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="chart-outer col-sm-6">
                            <h2>E1.31 Input Universes</h2>
                            <div class="canvas-holder">
                                <canvas id="inUnivt365"></canvas>
                            </div>
                        </div>
                        <div class="chart-outer col-sm-6">
                            <h2>E1.31 Input Channels</h2>
                            <div class="canvas-holder">
                                <canvas id="inChannel365"></canvas>
                            </div>
                        </div>
                    </div>


                </div> <!-- End Second Tab-->
                <!-- Third Tab-->
                <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
                    <div class="intro-div">
                        Questions about this tool? Ask them on the <a
                            href="http://falconchristmas.com/forum/index.php">forums</a>.
                    </div>

                </div><!-- End Third Tab-->
            </div> <!-- End tab-content-->

        </div><!-- All Charts-->
    </div>

    <!-- All Javascript from here on out-->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.bundle.min.js"
        integrity="sha512-SuxO9djzjML6b9w9/I07IWnLnQhgyYVSpHZx0JV97kGBfTIsUYlWflyuW4ypnvhBrslz1yJ3R+S14fdCWmSmSA=="
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-colorschemes"></script>
    <script src="my.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $.get("https://fppstats.thehormanns.net/api/summary"
            ).done(function (data) {
                $("#loading").hide();
                $("#all-charts").show();
                var when = formatDate(new Date(data.ts));
                $(".lastUpdated").html(when);
                remoteObjectArray(data.outputLocalPixels.data.pixelOrder, "Zero");
                remoteObjectArray(data.outputPanels.data.panelOrder, "Zero");
                remoteObjectArray(data.outputPanels.data.channelOrder, "Zero");

                console.log(data);
                drawPieChart($("#platform365"), data.platform, "last365Days");
                drawPieChart($("#platformGenericVar365"), data.platformVariantBreakout.data.Generic, "last365Days");
                drawPieChart($("#platformPiVar365"), data.platformVariantBreakout.data["Raspberry Pi"], "last365Days");
                drawPieChart($("#platformBBBVar365"), data.platformVariantBreakout.data["BeagleBone Black"], "last365Days");
                drawPieChart($("#fppMode365"), data.fppMode, "last365Days");
                drawPieChart($("#version365"), data.version, "last365Days");
                drawPieChart($("#mqtt365"), data.mqttEnabled, "last365Days");
                drawPieChart($("#uiLevel365"), data.uiLevel, "last365Days");
                drawPieChart($("#cape365"), data.capeInstalled, "last365Days");
                drawSortedBarChart($("#topTimezone365"), data.timeZone.data, 15, day365Transformer); // ME
                drawSortedBarChart($("#topCapes365"), data.capeType.data, 15, day365Transformer);
                drawBarChartObject($("#lastReportChart"), data.uniqueByMonth.data.data, data.uniqueByMonth.data.order, data.uniqueByMonth.data.order);
                drawSortedBarChart($("#plugins365"), data.topPlugins.data.last365Days, 10);
                drawBarChartObjectTime($("#outUnivt365"), data.outputUniverses.data.universe, data.outputUniverses.data.universeOrder, data.outputUniverses.data.universeOrder, "last365Days");
                drawBarChartObjectTime($("#outChannel365"), data.outputUniverses.data.channel, data.outputUniverses.data.channelOrder, data.outputUniverses.data.channelOrder, "last365Days");
                drawBarChartObjectTime($("#inUnivt365"), data.inputUniverses.data.universe, data.inputUniverses.data.universeOrder, data.inputUniverses.data.universeOrder, "last365Days");
                drawBarChartObjectTime($("#inChannel365"), data.inputUniverses.data.channel, data.inputUniverses.data.channelOrder, data.inputUniverses.data.channelOrder, "last365Days");
                drawSortedBarChart($("#outputProcessor365"), data.outputProcessors.data, 10, day365Transformer);
                drawSortedBarChart($("#popularSettings365"), data.settingsPopular.data, 10, day365Transformer);
                drawBarChartObjectTime($("#localPixels365"), data.outputLocalPixels.data.pixels, data.outputLocalPixels.data.pixelOrder, data.outputLocalPixels.data.pixelOrder, "last365Days");
                drawBarChartObjectTime($("#panelChannel365"), data.outputPanels.data.channel, data.outputPanels.data.channelOrder, data.outputPanels.data.channelOrder, "last365Days");
                drawPieChart($("#otherOutputs365"), data.outputOther, "last365Days");
                drawBarChartObjectTime($("#PanelCounts365"), data.outputPanels.data.panels, data.outputPanels.data.panelOrder, data.outputPanels.data.panelOrder, "last365Days");
                drawPieChart($("#PanelSubType365"), data.outputPanels.data.panelSubType, "last365Days");
                drawPieChart($("#panelSize365"), data.outputPanels.data.panelSize, "last365Days");

                //PanelSubType365

            }).fail(function () {
                alert("Unable to load statistics");
            })
        });
    </script>
</body>

</html>